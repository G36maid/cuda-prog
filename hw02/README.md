Introduction to CUDA Parallel Programming Homework Assignment 2 March, 2025

## Problem Statement
Write your own CPU+GPU code for finding the trace of a matrix of real numbers with parallel reduction. You can use the sample code in twcp1:/home/cuda_lecture_2025/vecDotProduct/vecDot.cu as template. The input N x N matrix can be generated by the routine RandomInit with N=6400. Also, determine the optimal block size and grid size for this problem.

## Results and Analysis

### Test Environment
- Input Size (N): 6400
- Data Type: float
- Operation: Vector Dot Product

### CPU Performance Baseline
- Processing Time: 0.015641 ms
- GFLOPS: 0.818362

### Optimal Configuration Found
- Block Size: 128 threads
- Grid Size: 50 blocks
- Kernel Time: 0.011566 ms
- Total Time: 0.043848 ms
- GFLOPS: 1.106692
- Relative Error: 1.401072717205626e-09

### Analysis of Optimal Configuration

The optimal configuration (128 threads/block, 50 blocks) is determined by the perfect match between:
1. **Total Elements**: 6400 (N)
2. **Total Threads**: 128 * 50 = 6400 threads
   - Each thread processes exactly one element in the initial phase
   - Perfect utilization of hardware resources

3. **Performance Analysis for 128 threads/block**:
```
Grid Size | Kernel Time (ms) | GFLOPS
200       | 0.014299        | 0.895
100       | 0.011730        | 1.091
50        | 0.011566        | 1.106  (Best)
25        | 0.011648        | 1.098
12        | 0.012281        | 1.042
```

4. **Why Grid Size 50 is Optimal**:
   - Larger grid sizes (>50): Increased overhead from too many blocks
   - Smaller grid sizes (<50): Insufficient parallelism
   - Grid size 50: Optimal balance between parallelism and overhead
   - Perfect work distribution: One element per thread initially

5. **Block Size 128 Advantages**:
   - Good occupancy for parallel reduction
   - Efficient use of shared memory
   - Optimal warp utilization (128 = 4 warps)
   - Balance between parallelism and resource usage

## Submission Guidelines

Your homework report should include your source codes, results, and discussions. The discussion file should be prepared with a typesetting system, e.g., LaTeX, Word, etc., and it is converted to a PDF file. All files should be zipped into one gzipped tar file, with a file name containing your student number and the problem set number (e.g., r05202043_HW2.tar.gz). Please send your homework with the title "your_student_number_HW2" to twchiu@phys.ntu.edu.tw before 17:00, June 11, 2025 (deadline for all problem sets).